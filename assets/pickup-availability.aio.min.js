/*
Generated time: April 7, 2025 21:22
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
customElements.get("pickup-availability")||customElements.define("pickup-availability",class extends HTMLElement{constructor(){super(),this.hasAttribute("available")&&(this.errorHtml=this.querySelector("template").content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(t){if(t){let e=this.dataset.rootUrl;e.endsWith("/")||(e+="/");t=e+`variants/${t}/?section_id=pickup-availability`;fetch(t).then(e=>e.text()).then(e=>{e=(new DOMParser).parseFromString(e,"text/html").querySelector(".shopify-section");this.renderPreview(e)}).catch(e=>{var t=this.querySelector("button");t&&t.removeEventListener("click",this.onClickRefreshList),this.renderError()})}}onClickRefreshList(){this.fetchAvailability(this.dataset.variantId)}update(e){e?.available?this.fetchAvailability(e.id):(this.removeAttribute("available"),this.innerHTML="")}renderError(){this.innerHTML="",this.appendChild(this.errorHtml),this.querySelector("button").addEventListener("click",this.onClickRefreshList)}renderPreview(e){var t=document.querySelector("pickup-availability-drawer");t&&t.remove(),e.querySelector("pickup-availability-preview")?(this.innerHTML=e.querySelector("pickup-availability-preview").outerHTML,this.setAttribute("available",""),document.body.appendChild(e.querySelector("pickup-availability-drawer")),this.dataset.productPageColorScheme.split(" ").forEach(e=>{document.querySelector("pickup-availability-drawer").classList.add(e)}),(t=this.querySelector("button"))&&t.addEventListener("click",e=>{document.querySelector("pickup-availability-drawer").show(e.target)})):(this.innerHTML="",this.removeAttribute("available"))}}),customElements.get("pickup-availability-drawer")||customElements.define("pickup-availability-drawer",class extends HTMLElement{constructor(){super(),this.onBodyClick=this.handleBodyClick.bind(this),this.querySelector("button").addEventListener("click",()=>{this.hide()}),this.addEventListener("keyup",e=>{"ESCAPE"===e.code.toUpperCase()&&this.hide()})}handleBodyClick(e){e=e.target;e==this||e.closest("pickup-availability-drawer")||"ShowPickupAvailabilityDrawer"==e.id||this.hide()}hide(){this.removeAttribute("open"),document.body.removeEventListener("click",this.onBodyClick),document.body.classList.remove("overflow-hidden"),removeTrapFocus(this.focusElement)}show(e){this.focusElement=e,this.setAttribute("open",""),document.body.addEventListener("click",this.onBodyClick),document.body.classList.add("overflow-hidden"),trapFocus(this)}});