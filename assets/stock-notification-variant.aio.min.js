/*
Generated time: October 24, 2025 20:37
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
console.log("üîß Stock Notification Variant Handler cargado - Maneja variant_id correctamente"),document.addEventListener("DOMContentLoaded",function(){"function"==typeof subscribe&&"undefined"!=typeof PUB_SUB_EVENTS&&subscribe(PUB_SUB_EVENTS.variantChange,function(o){var t,e,n,i;console.log("üì¶ Cambio de variante detectado:",o.data.variant?.id),o=o.data,t=o.sectionId,o=o.variant,(e=document.getElementById("stock-notification-"+t))&&(n=document.querySelector(`[data-section="${t}"] .product-form`)?.querySelector(".product-form__buttons"),o&&!o.available?(e.style.display="block",n&&(n.style.display="none"),i=document.getElementById("notification-variant-id-"+t),t=document.getElementById("notification-price-"+t),i&&o.id&&(i.value=o.id,console.log("‚úÖ Variant ID actualizado en el formulario:",o.id)),t&&void 0!==o.price&&(t.value=o.price,console.log("üí∞ Precio actualizado en el formulario:",o.price))):(e.style.display="none",n&&(n.style.display="block")))}),document.querySelectorAll("product-info").forEach(function(o){o.addEventListener("setUnavailable",function(){var o=this.dataset.section,t=document.getElementById("stock-notification-"+o),o=document.querySelector(`[data-section="${o}"] .product-form`)?.querySelector(".product-form__buttons");t&&(t.style.display="block",o)&&(o.style.display="none")})}),document.querySelectorAll(".stock-notification-container").forEach(function(o){var t=o.id.replace("stock-notification-",""),t=document.querySelector(`[data-section="${t}"] .product-form`)?.querySelector(".product-form__buttons");"block"===o.style.display&&t&&(t.style.display="none")})}),document.addEventListener("submit",function(n){if(n.target.classList.contains("stock-notification-form")){n.preventDefault();let t=n.target;n=new FormData(t);let e=t.nextElementSibling,o=t.querySelector('button[type="submit"]');o&&(o.disabled=!0,o.classList.add("loading"),o.textContent="");var i=n.get("variant_id"),a=n.get("product_id"),a=(console.log("üì§ Enviando notificaci√≥n de stock:"),console.log("  Product ID:",a),console.log("  Variant ID:",i),console.log("  Phone:",n.get("phone")),Object.fromEntries(n.entries()));console.log("üì§ Enviando notificaci√≥n de stock:"),console.log("  Product ID:",a.product_id),console.log("  Variant ID:",a.variant_id),console.log("  Phone:",a.phone),console.log("  Datos completos:",a),fetch(t.action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(o=>{if(o.ok)return o.json();throw new Error(`HTTP ${o.status}: `+o.statusText)}).then(o=>{console.log("‚úÖ Notificaci√≥n enviada exitosamente:",o),t.style.display="none",e&&(e.style.display="block")}).catch(o=>{console.error("‚ùå Error al enviar notificaci√≥n:",o),alert("Hubo un error al enviar tu solicitud. Por favor intenta de nuevo.")}).finally(()=>{o&&(o.disabled=!1,o.classList.remove("loading"),o.textContent="Notificarme cuando est√© disponible")})}});