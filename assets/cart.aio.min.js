/*
Generated time: April 7, 2025 21:22
This file was created by the app developer. Feel free to contact the original developer with any questions. It was minified (compressed) by AVADA. AVADA do NOT own this script.
*/
class CartRemoveButton extends HTMLElement{constructor(){super(),this.addEventListener("click",e=>{e.preventDefault(),(this.closest("cart-items")||this.closest("cart-drawer-items")).updateQuantity(this.dataset.index,0,e)})}}customElements.define("cart-remove-button",CartRemoveButton);class CartItems extends HTMLElement{constructor(){super(),this.lineItemStatusElement=document.getElementById("shopping-cart-line-item-status")||document.getElementById("CartDrawer-LineItemStatus");var e=debounce(e=>{this.onChange(e)},ON_CHANGE_DEBOUNCE_TIMER);this.addEventListener("change",e.bind(this))}cartUpdateUnsubscriber=void 0;connectedCallback(){this.cartUpdateUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,e=>{if("cart-items"!==e.source)return this.onCartUpdate()})}disconnectedCallback(){this.cartUpdateUnsubscriber&&this.cartUpdateUnsubscriber()}resetQuantityInput(e){e=this.querySelector("#Quantity-"+e);e.value=e.getAttribute("value"),this.isEnterPressed=!1}setValidity(e,t,r){e.target.setCustomValidity(r),e.target.reportValidity(),this.resetQuantityInput(t),e.target.select()}validateQuantity(e){var t=parseInt(e.target.value),r=e.target.dataset.index;let a="";t<e.target.dataset.min?a=window.quickOrderListStrings.min_error.replace("[min]",e.target.dataset.min):t>parseInt(e.target.max)?a=window.quickOrderListStrings.max_error.replace("[max]",e.target.max):t%parseInt(e.target.step)!=0&&(a=window.quickOrderListStrings.step_error.replace("[step]",e.target.step)),a?this.setValidity(e,r,a):(e.target.setCustomValidity(""),e.target.reportValidity(),this.updateQuantity(r,t,e,document.activeElement.getAttribute("name"),e.target.dataset.quantityVariantId))}onChange(e){this.validateQuantity(e)}onCartUpdate(){return"CART-DRAWER-ITEMS"===this.tagName?fetch(routes.cart_url+"?section_id=cart-drawer").then(e=>e.text()).then(e=>{var t,r=(new DOMParser).parseFromString(e,"text/html");for(t of["cart-drawer-items",".cart-drawer__footer"]){var a=document.querySelector(t),n=r.querySelector(t);a&&n&&a.replaceWith(n)}}).catch(e=>{console.error(e)}):fetch(routes.cart_url+"?section_id=main-cart-items").then(e=>e.text()).then(e=>{e=(new DOMParser).parseFromString(e,"text/html").querySelector("cart-items");this.innerHTML=e.innerHTML}).catch(e=>{console.error(e)})}getSectionsToRender(){return[{id:"main-cart-items",section:document.getElementById("main-cart-items").dataset.id,selector:".js-contents"},{id:"cart-icon-bubble",section:"cart-icon-bubble",selector:".shopify-section"},{id:"cart-live-region-text",section:"cart-live-region-text",selector:".shopify-section"},{id:"main-cart-footer",section:document.getElementById("main-cart-footer").dataset.id,selector:".js-contents"}]}updateQuantity(s,e,t,o,r){this.enableLoading(s);e=JSON.stringify({line:s,quantity:e,sections:this.getSectionsToRender().map(e=>e.section),sections_url:window.location.pathname});let a=t.currentTarget instanceof CartRemoveButton?"clear":"change";fetch(""+routes.cart_change_url,{...fetchConfig(),body:e}).then(e=>e.text()).then(e=>{let i=JSON.parse(e);CartPerformance.measure(a+':paint-updated-sections"',()=>{var t=document.getElementById("Quantity-"+s)||document.getElementById("Drawer-quantity-"+s),r=document.querySelectorAll(".cart-item");if(i.errors)t.value=t.getAttribute("value"),this.updateLiveRegions(s,i.errors);else{this.classList.toggle("is-empty",0===i.item_count);var a=document.querySelector("cart-drawer"),n=document.getElementById("main-cart-footer"),n=(n&&n.classList.toggle("is-empty",0===i.item_count),a&&a.classList.toggle("is-empty",0===i.item_count),this.getSectionsToRender().forEach(e=>{(document.getElementById(e.id).querySelector(e.selector)||document.getElementById(e.id)).innerHTML=this.getSectionInnerHTML(i.sections[e.section],e.selector)}),i.items[s-1]?i.items[s-1].quantity:void 0);let e="";r.length===i.items.length&&n!==parseInt(t.value)&&(e=void 0===n?window.cartStrings.error:window.cartStrings.quantityError.replace("[quantity]",n)),this.updateLiveRegions(s,e);r=document.getElementById("CartItem-"+s)||document.getElementById("CartDrawer-Item-"+s);r&&r.querySelector(`[name="${o}"]`)?a?trapFocus(a,r.querySelector(`[name="${o}"]`)):r.querySelector(`[name="${o}"]`).focus():0===i.item_count&&a?trapFocus(a.querySelector(".drawer__inner-empty"),a.querySelector("a")):document.querySelector(".cart-item")&&a&&trapFocus(a,document.querySelector(".cart-item__name"))}}),CartPerformance.measureFromEvent(a+":user-action",t),publish(PUB_SUB_EVENTS.cartUpdate,{source:"cart-items",cartData:i,variantId:r})}).catch(()=>{this.querySelectorAll(".loading__spinner").forEach(e=>e.classList.add("hidden")),(document.getElementById("cart-errors")||document.getElementById("CartDrawer-CartErrors")).textContent=window.cartStrings.error}).finally(()=>{this.disableLoading(s)})}updateLiveRegions(e,t){e=document.getElementById("Line-item-error-"+e)||document.getElementById("CartDrawer-LineItemError-"+e);e&&(e.querySelector(".cart-item__error-text").textContent=t),this.lineItemStatusElement.setAttribute("aria-hidden",!0);let r=document.getElementById("cart-live-region-text")||document.getElementById("CartDrawer-LiveRegionText");r.setAttribute("aria-hidden",!1),setTimeout(()=>{r.setAttribute("aria-hidden",!0)},1e3)}getSectionInnerHTML(e,t){return(new DOMParser).parseFromString(e,"text/html").querySelector(t).innerHTML}enableLoading(e){(document.getElementById("main-cart-items")||document.getElementById("CartDrawer-CartItems")).classList.add("cart__items--disabled");var t=this.querySelectorAll(`#CartItem-${e} .loading__spinner`),e=this.querySelectorAll(`#CartDrawer-Item-${e} .loading__spinner`);[...t,...e].forEach(e=>e.classList.remove("hidden")),document.activeElement.blur(),this.lineItemStatusElement.setAttribute("aria-hidden",!1)}disableLoading(e){(document.getElementById("main-cart-items")||document.getElementById("CartDrawer-CartItems")).classList.remove("cart__items--disabled");var t=this.querySelectorAll(`#CartItem-${e} .loading__spinner`),e=this.querySelectorAll(`#CartDrawer-Item-${e} .loading__spinner`);t.forEach(e=>e.classList.add("hidden")),e.forEach(e=>e.classList.add("hidden"))}}customElements.define("cart-items",CartItems),customElements.get("cart-note")||customElements.define("cart-note",class extends HTMLElement{constructor(){super(),this.addEventListener("input",debounce(e=>{var t=JSON.stringify({note:e.target.value});fetch(""+routes.cart_update_url,{...fetchConfig(),body:t}).then(()=>CartPerformance.measureFromEvent("note-update:user-action",e))},ON_CHANGE_DEBOUNCE_TIMER))}});